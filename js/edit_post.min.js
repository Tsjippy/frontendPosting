(()=>{"use strict";let e,t=function(e){"undefined"!=typeof tinymce&&(tinymce.remove(),document.querySelectorAll(".entry-content .wp-editor-area").forEach((e=>{window.tinyMCE.execCommand("mceAddEditor",!1,e.id)}))),window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0,cancelable:!0})),document.querySelectorAll(".wp-switch-editor").forEach((e=>e.addEventListener("click",(t=>{let n=e.closest(".wp-editor-wrap").querySelector(".wp-editor-area"),o=e.closest(".wp-editor-wrap").querySelector(".mce-panel");n.style.visibility="unset",t.target.matches(".switch-tmce")?(o.style.display="block",n.style.display="none"):(o.style.display="none",n.style.display="block")})))),document.querySelectorAll("select:not(.nonice,.swal2-select)").forEach((function(e){Main.attachNiceSelect(e)}));const t=new Event("scriptsloaded");e.dispatchEvent(t)},n=function(o){if(null==o)return;0==e.length&&t(o);let c=e.shift();if(null!=c)if("SCRIPT"==c.tagName&&null==document.getElementById(c.id)){var r=document.createElement("script");""==c.type?r.type="text/javascript":r.type=c.type,""!=c.src?r.src=c.src:r.innerHTML=c.innerHTML,r.id=c.id;try{document.head.appendChild(r)}catch(e){console.error(e)}e.length>0?""!=c.src?r.addEventListener("load",n.bind(null,o)):n(o):""!=c.src?r.addEventListener("load",t.bind(null,o)):t(o)}else e.length>0?n(o):t(o);else t(o)};console.log("Edit post.js loaded");document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".page-edit.hidden").forEach((e=>{e.classList.remove("hidden")}))})),document.addEventListener("click",(function(t){t.target.matches(".page-edit")&&async function(t){let o=t.target,c=o.closest("div").querySelector(".content-wrapper"),r=c.parentNode,d=new FormData,l=o.dataset.id;d.append("post-id",l);const i=new URL(edit_post_url);i.searchParams.set("post-id",l),window.history.pushState({},"",i);let a=Main.showLoader(c,!0,50,"Requesting form..."),s=await FormSubmit.fetchRestApi("frontend_posting/post_edit",d);if(s){Main.hideModals();let t=document.createElement("div");t.classList.add("content-wrapper"),t.innerHTML=s.html,document.querySelectorAll(".content-wrapper").forEach((e=>e.remove())),r.appendChild(t),function(t,o){e=[];let c=document.createElement("div");c.innerHTML=t.html,e=Array.prototype.slice.call(c.getElementsByTagName("script")),t.js&&(c.innerHTML=t.js,e=[...c.children].concat(e),n(o)),t.css&&(c.innerHTML=t.css,[...c.children].forEach((e=>{document.head.appendChild(e)})))}(s,document),a.remove()}else a.outerHTML=o.outerHTML}(t)})),document.addEventListener("scriptsloaded",(function(){document.querySelectorAll("#frontend-upload-form").forEach((e=>e.classList.remove("hidden"))),document.querySelectorAll(".content-wrapper").forEach((e=>e.classList.remove("hidden"))),document.querySelectorAll(".loader-wrapper:not(.hidden)").forEach((e=>e.remove()))}))})();
//# sourceMappingURL=edit_post.min.js.map